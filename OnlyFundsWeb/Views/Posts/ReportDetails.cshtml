@model BusinessObjects.Post
@using BusinessObjects
@using DataAccess.IRepository
@using DataAccess.Repository
@using Microsoft.AspNetCore.Http

@{
    ViewData["Title"] = "Report details";
    string username = Context.Session.GetString("user");
    string admin = Context.Session.GetString("admin");
    if (admin != null)
    {
        Layout = "_adminLayout";
    }
    else
    {
        Layout = "~/Views/Shared/_userLayout.cshtml";
    }
    IEnumerable<Comment> comments = ViewBag.Comments as IEnumerable<Comment>;
    IEnumerable<User> cmtUsers = ViewBag.CmtUsers as IEnumerable<User>;
    int postLike = ViewBag.PostLike;
    int postComment = ViewBag.PostComment;
    User CurrentUser = ViewBag.CurrentUser;
    bool reported = false;
    if (CurrentUser != null &&!CurrentUser.Equals(Model.UploaderUsername))
    {
        IEnumerable<PostReport> reports = ViewBag.Reports as IEnumerable<PostReport>;
        foreach (var report in reports)
        {
            if (report.ReporterUsername.Equals(CurrentUser.Username))
            {
                reported = true;
                break;
            }
        }
    }
}

<head>
    <link rel="stylesheet" href="~/css/.css"/>
</head>
<!-- Main content -->
<main class="mt-3">
    <div class="container w-75 ps-0 pe-0">
        <div class="row text-center">
            <h3>Report details</h3>
        </div>
        <div class="row d-flex justify-content-center">
            <div class="report-body w-75 border rounded-3 p-3">
                <form action="#SolveReport" method="post">
                    <div class="container">
                        <div class="row">
                            <div class="col-4 my-auto">Title:</div>
                            <div class="col-8">
                                <input class=" form-control form-control-sm" type="text"
                                       value="Title of the report goes here" disabled readonly>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-4">User report:</div>
                            <div class="col-8 fw-bold">
                                Name of the report's author
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-4">Reported post:</div>
                            <div class="col-8">
                                <a href="#reported-post" class="post-detail">
                                    <span class="post-name">Post name</span>
                                    by
                                    <span class="author">Author's name</span>
                                </a>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-4">Status:</div>
                            <div class="col-8">
                                <!-- checked và disabled dựa trên status của report -->
                                <input class="form-check-input" type="radio" name="status-radio"
                                       id="solved" onclick="return false;">
                                <label class="form-check-label text-success me-5" for="solved">
                                    Solved <i class="fas fa-check"></i>
                                </label>
                                <input class="form-check-input" type="radio" name="status-radio"
                                       id="un-solved" checked onclick="return false;">
                                <label class="form-check-label text-danger" for="un-solved">
                                    Unsolved <i class="fas fa-times"></i>
                                </label>
                            </div>
                        </div>
                        <!-- Nếu report có description thì in row này ra không thì bỏ -->
                        <div class="row mt-3">
                            <div class="col-12">
                                <label for="report-description">Description: </label>
                                <textarea class="form-control" style="min-height: 7rem;">Description of the report</textarea>
                            </div>

                        </div>
                        <div class="row mt-3 pb-3">
                            <div class="col-4">Choose action:</div>
                            <div class="col-8">
                                <select class="form-select form-select-sm" name="action" id="action">
                                    <option value="del-post">Delete post</option>
                                    <option value="del-user">Ban user</option>
                                    <option value="warn-user">Warn user</option>
                                    <option value="do-nothing" selected>Do nothing</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mt-2 border-bottom"></div>
                        <div class="row text-center">
                            <button type="submit" class="btn btn-success">Finish</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>
